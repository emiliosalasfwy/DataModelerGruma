<BusinessLogic methodName="validateNoProduct" businessObjectClass="LoScannedKPIProducts" businessObjectType="listobject" asynchronous="true" accessibility="PUBLIC" final="false" module="CORE" simpleEditorOnly="">
  <Parameters>
    <MethodInput name="GTIN" type="String" />
  </Parameters>
<Code language="JavaScript">
<![CDATA[var messageCollector = new MessageCollector();

var error = {
  "level" : "error",
  "objectClass" : "LoScannedKPIProducts",
  "messageParams":{"gtin": GTIN },
  "messageID" : "NoScanProductsMsg"
}; 
messageCollector.add(error);

var buttonValues = {};
buttonValues[Localization.resolve("Ok")] = "ok";
var messages = messageCollector.getMessages().join("<br>");
promise = MessageBox.displayMessage(Localization.resolve("MessageBox_Title_Validation"), messages, buttonValues)
  .then(function(result){
  messageCollector.destroy();
});]]>
</Code>
  <Return name="promise" value="promise" />
</BusinessLogic>