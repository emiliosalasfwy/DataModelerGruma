<BusinessLogic methodName="validateNoOpenTimeCard" businessObjectClass="BoDailyReportCreateNewWizard" businessObjectType="" asynchronous="true" accessibility="PUBLIC" final="false" module="CORE" simpleEditorOnly="">
  <Parameters>
    <MethodInput name="messageCollector" type="messageCollector" />
  </Parameters>
<Code language="JavaScript">
<![CDATA[var promise = BoFactory.loadObjectByParamsAsync(BO_USERDOCMETA, me.getQueryBy("pKey", me.getUsrDocMetaPKey())).then(
  function (boUserDocMeta) {
    if(boUserDocMeta.getUiGroup() === "TimeCard" && Utils.isDefined(ApplicationContext.get('openTimeCardPKey')) && !Utils.isEmptyString(ApplicationContext.get('openTimeCardPKey'))) {
      messageCollector.add({"level": "error", 
                            "objectClass": "BoUserDailyReport", 
                            "simpleProperty": " ", 
                            "messageID": "CasUsrDailyReportNoOpenTimeCard"});
    } 
  }
);]]>
</Code>
  <Return name="messageCollector" value="promise" />
</BusinessLogic>