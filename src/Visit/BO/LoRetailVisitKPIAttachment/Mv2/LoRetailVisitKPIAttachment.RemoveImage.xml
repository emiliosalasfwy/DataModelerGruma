<BusinessLogic methodName="removeImage" businessObjectClass="LoRetailVisitKPIAttachment" businessObjectType="listobject" asynchronous="false" accessibility="PUBLIC" final="false" module="CORE" simpleEditorOnly="">
  <Parameters>
    <MethodInput name="imageId" type="String" />
  </Parameters>
<Code language="JavaScript">
<![CDATA[var currImage = me.getItemByPKey(imageId);

if(Utils.isDefined(currImage)){
  currImage.delete();
  me.setFilterArray([{"objectStatus" : me.self.STATE_DELETED + me.self.STATE_NEW, "op" : "NE"},
                       {"objectStatus" : me.self.STATE_DELETED + me.self.STATE_UNMODIFIED, "op" : "NE"}]);
}]]>
</Code>
  <Return name="result" value="promise" />
</BusinessLogic>