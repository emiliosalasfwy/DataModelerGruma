<BusinessLogic methodName="getActivitiesForCard" businessObjectClass="LoActivities" businessObjectType="listobject" asynchronous="true" accessibility="PUBLIC" final="false" module="CORE" simpleEditorOnly="">
  <Parameters>
    <MethodInput name="cardDate" type="String" />
  </Parameters>
<Code language="JavaScript">
<![CDATA[///Double conversion is needed  here as no Utils Function is available to replace
//returns Date with TimeStamp
var jsonQuery = {
  "cardDate" : Utils.isCasBackend() ? Utils.convertDateTime2Ansi(Utils.convertAnsiDate2Date(cardDate)) : cardDate,
  "limitDueToFormFactor" : Utils.isPhone() ? 3 : 5
};

me.removeAllItems();

var promise = Facade.getListAsync("LoActivities", jsonQuery).then(
  function(listObject) {
    me.addItems(listObject);

    return me;
  }
);]]>
</Code>
  <Return name="promise" value="promise" />
</BusinessLogic>