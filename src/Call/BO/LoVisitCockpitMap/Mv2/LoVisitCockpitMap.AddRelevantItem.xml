<BusinessLogic methodName="addRelevantItem" businessObjectClass="LoVisitCockpitMap" businessObjectType="listobject" asynchronous="false" accessibility="PUBLIC" final="false" module="CORE" simpleEditorOnly="">
  <Parameters>
    <MethodInput name="loVisitList" type="Object" />
  </Parameters>
<Code language="JavaScript">
<![CDATA[var loaded = false;
var relevantItem = loVisitList.getAllItems().find(function(visit){
  return !Utils.isEmptyString(visit.getBpaMainPKey()) && visit.getLatitude() !== 0 && visit.getLongitude() !== 0;
});

if(Utils.isDefined(relevantItem)){
  var mapItem = {
    pkey:            relevantItem.pKey,
    bpaMainPKey:     relevantItem.bpaMainPKey,
    latitude:        relevantItem.latitude,
    longitude:       relevantItem.longitude,
    toolTipText:     relevantItem.toolTipText,
    mapPinId:        relevantItem.mapPinId,
    address:         relevantItem.address
  };
  me.removeAllItems();
  me.addItems([mapItem]);
  loaded = true;
}else{
  me.removeAllItems();
  loaded = true;
}]]>
</Code>
  <Return name="loaded" value="loaded" />
</BusinessLogic>