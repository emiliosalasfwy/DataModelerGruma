<BusinessLogic methodName="deleteItem" businessObjectClass="LoCallAttachments" businessObjectType="" asynchronous="false" accessibility="PUBLIC" final="false" module="CORE" simpleEditorOnly="">
  <Parameters>
    <MethodInput name="pKey" type="String" />
    <MethodInput name="jDTPKey" type="String" />
  </Parameters>
<Code language="JavaScript">
<![CDATA[var liCallAttachment = me.getItemByPKey(pKey);

if(Utils.isDefined(liCallAttachment)){
  liCallAttachment.delete();

  if(Utils.isDefined(jDTPKey)){
    me.setFilterArray([{"clbMainPKey": jDTPKey, "op": "EQ"},
                       {"objectStatus" : me.self.STATE_DELETED + me.self.STATE_NEW, "op" : "NE"},
                       {"objectStatus" : me.self.STATE_DELETED + me.self.STATE_UNMODIFIED, "op" : "NE"}]);
  } else{
    me.setFilterArray([{"objectStatus" : me.self.STATE_DELETED + me.self.STATE_NEW, "op" : "NE"},
                       {"objectStatus" : me.self.STATE_DELETED + me.self.STATE_UNMODIFIED, "op" : "NE"}]);
  }
}]]>
</Code>
  <Return name="" value="" />
</BusinessLogic>