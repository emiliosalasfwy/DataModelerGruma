<BusinessLogic methodName="updateJobInfo" businessObjectClass="LoMagnetizedJobList" businessObjectType="" asynchronous="false" accessibility="PUBLIC" final="false" module="CORE" simpleEditorOnly="">
  <Parameters>
    <MethodInput name="boJobManager" type="Object" />
  </Parameters>
<Code language="JavaScript">
<![CDATA[var loQuestions = boJobManager.getLoQuestions();
var dicJobListPKeysWithJobs = Utils.createDictionary();
var loPos = boJobManager.getLoPOS();

if (Utils.isDefined(loPos)) {
  var loSurveys;

  for (var idxLoPos = 0; idxLoPos < loPos.length; idxLoPos++) {
    loSurveys = loPos[idxLoPos].getSurveys();
    if (Utils.isDefined(loSurveys)) {
      var surveys = loSurveys.getAllItems();
      for (var idxLoSurveys = 0; idxLoSurveys < surveys.length; idxLoSurveys++) {
        if (surveys[idxLoSurveys].getJobListPKey() !== " " && surveys[idxLoSurveys].getDone() == "1") {
          dicJobListPKeysWithJobs.add(surveys[idxLoSurveys].getJobListPKey(), 0);
        }
      }
    }
  }
}

if (Utils.isDefined(loQuestions)) {
  var questions = loQuestions.getAllItems();
  for (var idxLoQuestions = 0; idxLoQuestions < questions.length; idxLoQuestions++) {
    if (questions[idxLoQuestions].getJobListPKey() !== " " && questions[idxLoQuestions].getDone() == "1") {
      dicJobListPKeysWithJobs.add(questions[idxLoQuestions].getJobListPKey(), 0);
    }
  }
}

if (dicJobListPKeysWithJobs.keys().length > 0) {
  var magnetizedJobLists = me.getAllItems();
  for (var idxLoop = 0; idxLoop < magnetizedJobLists.length; idxLoop++) {
    if (dicJobListPKeysWithJobs.containsKey(magnetizedJobLists[idxLoop].getPKey())) {
      magnetizedJobLists[idxLoop].setJobExists("1");
    }
  }
}]]>
</Code>
  <Return name="" value="" />
</BusinessLogic>