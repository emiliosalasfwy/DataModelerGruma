<BusinessLogic methodName="navigateToCustomer" businessObjectClass="LoAgendaOverview" businessObjectType="listobject" asynchronous="true" accessibility="PUBLIC" final="false" module="CORE" simpleEditorOnly="">
  <Parameters>
    <MethodInput name="MainPKey" type="String" />
  </Parameters>
<Code language="JavaScript">
<![CDATA[var promise;

var li = me.getItemByPKey(MainPKey);

var latitude = li.getLatitude();
var longitude = li.getLongitude();
var address = li.getAddress();

if(latitude === 0 && longitude === 0 && address === ", ")
{
  var buttonValues = {};
  buttonValues[Localization.resolve("OK")] = "ok";
  promise = MessageBox.displayMessage(Localization.resolve("MessageBox_Title_Validation"), Localization.resolve("BoCall_CasClbNoGeoLocation"), buttonValues);
}
else
{
  promise = BoFactory.createObjectAsync("BoGeoHelper", {})
    .then(
    function(geoHelper)
    {
      return geoHelper.startNavigation(latitude, longitude, address, "", "", "" );
    }
  );
}]]>
</Code>
  <Return name="result" value="promise" />
</BusinessLogic>