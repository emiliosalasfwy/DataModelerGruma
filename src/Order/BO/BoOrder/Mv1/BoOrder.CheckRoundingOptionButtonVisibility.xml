<BusinessLogic methodName="checkRoundingOptionButtonVisibility" businessObjectClass="BoOrder" businessObjectType="" asynchronous="false" accessibility="PUBLIC" final="false" module="CORE" simpleEditorOnly="">
  <Parameters>
    <MethodInput name="mode" type="String" />
  </Parameters>
<Code language="JavaScript">
<![CDATA[var visible = false;
var roundingON = me.getIsRoundingOn();
var roundingToggleChanged = me.getIsRoundingToggleChanged();
var quantityRounding;

if (me.isEditable()) {
  if(Utils.isDefined(me.getBoOrderMeta().getQuantityRounding())) {
    quantityRounding = me.getBoOrderMeta().getQuantityRounding();
  }

  switch (mode) {
    case "ON":
      visible = (quantityRounding === "RoundingAlwaysOn") || 
        (roundingToggleChanged == "0" && quantityRounding === "RoundingDefaultOn") ||
        (roundingToggleChanged == "1" && roundingON == "1");

      break;
    case "OFF":
      visible = (roundingToggleChanged == "0" && quantityRounding === "RoundingDefaultOff") ||
        (roundingToggleChanged == "1" && roundingON == "0" && quantityRounding !== "RoundingAlwaysOn");
      break;
  }
}]]>
</Code>
  <Return name="visible" value="visible" />
</BusinessLogic>