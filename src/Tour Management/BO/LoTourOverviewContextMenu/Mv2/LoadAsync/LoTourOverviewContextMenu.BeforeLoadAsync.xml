<BusinessLogic methodName="beforeLoadAsync" businessObjectClass="LoTourOverviewContextMenu" businessObjectType="" asynchronous="true" accessibility="PUBLIC" final="false" module="CORE" simpleEditorOnly="">
  <Parameters>
    <MethodInput name="context" type="Object" />
  </Parameters>
<Code language="JavaScript">
<![CDATA[var navigationMode = Framework.getProcessContext().navigationMode;
var navigation = Utils.isDefined(navigationMode) ? navigationMode : "";

var tmgStatus = Utils.convertDsParamsOldToNew(context.jsonQuery).tmgStatus;
var tmgStatusIsOpenOrInitial = tmgStatus === "Open" || tmgStatus === "Initial";

var rescheduleMenuEntry = {
  "id": "0000001",
  "actionImg": "RescheduleDarkGrey24",
  "actionId": "Reschedule",
  "processEvent": "Reschedule",
  "actionVisible" : "1",
  "actionEnabled" : tmgStatusIsOpenOrInitial ? "1" : "0"
};

var cancelMenuEntry = {
  "id": "0000002",
  "actionImg" : "CancelDarkGrey24",
  "actionId" : "Cancel",
  "processEvent" : "Cancel",
  "actionVisible" : "1",
  "actionEnabled" : (navigation === "Overview" || navigation === "StartOfDay") && (tmgStatusIsOpenOrInitial || tmgStatus === "Running") ? "1" : "0"
};

me.addItems([ rescheduleMenuEntry, cancelMenuEntry ]);

var promise = when.resolve(context);]]>
</Code>
  <Return name="context" value="promise" />
</BusinessLogic>