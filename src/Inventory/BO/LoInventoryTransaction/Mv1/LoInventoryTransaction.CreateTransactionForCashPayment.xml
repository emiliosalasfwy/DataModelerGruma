<BusinessLogic methodName="createTransactionForCashPayment" businessObjectClass="LoInventoryTransaction" businessObjectType="listobject" asynchronous="false" accessibility="PUBLIC" final="false" module="CORE" simpleEditorOnly="">
  <Parameters>
    <MethodInput name="paymentItem" type="LiCheckInPaymentItem" />
    <MethodInput name="ivcInformation" type="Object" />
  </Parameters>
<Code language="JavaScript">
<![CDATA[var jsonIvcTaData = {};

// Create inventory transaction
jsonIvcTaData = {};

jsonIvcTaData.pKey = PKey.next();
jsonIvcTaData.ivcMainPKey = ivcInformation.ivcMainPKey;
jsonIvcTaData.ivcTaMetaPKey = ivcInformation.ivcMetaByPaymentMeta.getIvcTaMetaPKey();
jsonIvcTaData.sdoMainPKey = paymentItem.getSdoMainPKey();
jsonIvcTaData.sdoPaymentPKey = paymentItem.getPKey();
jsonIvcTaData.accounted = "0";
jsonIvcTaData.initiationDate = Utils.createDateToday();
jsonIvcTaData.salesOrg = ApplicationContext.get('user').getBoUserSales().getSalesOrg();
jsonIvcTaData.initiatorUsrMainPKey = ApplicationContext.get('user').getPKey();
jsonIvcTaData.chargeDate = Utils.createDateToday();
jsonIvcTaData.amount = paymentItem.getAmountReceipt();
jsonIvcTaData.paymentMethod = paymentItem.getPaymentMethod();

me.addItems([jsonIvcTaData]);
me.getItemByPKey(jsonIvcTaData.pKey).setObjectStatus(STATE.NEW | STATE.DIRTY);]]>
</Code>
  <Return name="" value="" />
</BusinessLogic>