<BusinessLogic methodName="afterLoadAsync" businessObjectClass="BoTimeSlot" businessObjectType="{BOType}" asynchronous="true" accessibility="PUBLIC" final="false" module="CORE" simpleEditorOnly="">
  <Parameters>
    <MethodInput name="result" type="Object" />
    <MethodInput name="context" type="Object" />
  </Parameters>
<Code language="JavaScript">
<![CDATA[var promise=when.resolve(result);

var objState = me.getObjectStatus();

//convert time from 09:00:00.000Z to 09:00 so that time picker control is able to handle it
me.setStartTime(me.getStartTime().substr(0,5));
me.setEndTime(me.getEndTime().substr(0,5));

//list of existing time slots --> needed to validate time zone overlap
if(Utils.isDefined(context.jsonQuery.listTimeSlots)){
  me.setListTimeSlots(context.jsonQuery.listTimeSlots);
}

me.setObjectStatus(objState);
]]>
</Code>
  <Return name="result" value="promise" />
</BusinessLogic>